* async/await polliffy
    - reference [facebook/regennerator](https://github.com/facebook/regenerator)
    - fn -> generator -> async promise


### 1. fn -> generator
 
#### 1.1 Iterator implement

```javascript
interface Iterator {
    next(value?: any): IterationResult
}

interface IterationResult {
    value: any;
    done: boolean;
}
```

#### 1.2 warp(fn): Generator

```javascript

type GeneratorPrototypeMethodName = 'next' | 'throw' | 'return';

interface GeneratorPrototype {
    /**
    *   通过this._invoke封装GeneratorPrototypeMethodName方法
    *   this._invoke 关联状态机行为，返回IterationResult
    *
    *   function warppMethod (value) { 
    *       return this._invoke(GeneratorPrototypeMethodName, args); 
    *   }
    **/
    next(value?: any): IterationResult;
    return(value?: any): IterationResult;
    throw(error?: any): Error;
}

// 生成的generator-like对象
class GeneratorDucker extends GeneratorPrototype {
    // connect with context
    _invoke: Function;
}

declare function makeInvokeMethod(fn, self, context: Context): invoke;

// 闭包保存context状态机
declare function invoke(method: GeneratorPrototypeMethodName, arg): any;

// wrapper
function generatorify(fn) {
    var generator = Object.create(GeneratorPrototype);
    var context = new Context([]);
    generator._invoke = makeInvokeMethod(fn, self, context);
    return generator;
}

// 状态机
class Context {
    prev: number;
    next: number;
    reset: Function;
    stop: Function;
    // ...
}
// fn's code like through babel
while (1) {
    switch (context.prev = context.next) {
        case 0:
        case 2:
        ...
    }
}
```

### 2. generator -> async

##### 2.1 promifiy
> asyncToGenerator: auto next with generator

